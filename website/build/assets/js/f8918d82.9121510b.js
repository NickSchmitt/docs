"use strict";(self.webpackChunkatmo_trial_doc=self.webpackChunkatmo_trial_doc||[]).push([[8713],{3905:function(e,n,t){t.d(n,{Zo:function(){return c},kt:function(){return m}});var i=t(7294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,i,a=function(e,n){if(null==e)return{};var t,i,a={},r=Object.keys(e);for(i=0;i<r.length;i++)t=r[i],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)t=r[i],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var u=i.createContext({}),s=function(e){var n=i.useContext(u),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},c=function(e){var n=s(e.components);return i.createElement(u.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return i.createElement(i.Fragment,{},n)}},d=i.forwardRef((function(e,n){var t=e.components,a=e.mdxType,r=e.originalType,u=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),d=s(t),m=a,b=d["".concat(u,".").concat(m)]||d[m]||p[m]||r;return t?i.createElement(b,o(o({ref:n},c),{},{components:t})):i.createElement(b,o({ref:n},c))}));function m(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var r=t.length,o=new Array(r);o[0]=d;var l={};for(var u in n)hasOwnProperty.call(n,u)&&(l[u]=n[u]);l.originalType=e,l.mdxType="string"==typeof e?e:a,o[1]=l;for(var s=2;s<r;s++)o[s]=t[s];return i.createElement.apply(null,o)}return i.createElement.apply(null,t)}d.displayName="MDXCreateElement"},701:function(e,n,t){t.r(n),t.d(n,{frontMatter:function(){return l},contentTitle:function(){return u},metadata:function(){return s},toc:function(){return c},default:function(){return d}});var i=t(7462),a=t(3366),r=(t(7294),t(3905)),o=["components"],l={},u="Using Compute from JavaScript or TypeScript",s={unversionedId:"compute/quickstart/client-libraries/nodejs",id:"compute/quickstart/client-libraries/nodejs",isDocsHomePage:!1,title:"Using Compute from JavaScript or TypeScript",description:"Use this library to easily interact with Compute's APIs.",source:"@site/docs/compute/quickstart/client-libraries/nodejs.md",sourceDirName:"compute/quickstart/client-libraries",slug:"/compute/quickstart/client-libraries/nodejs",permalink:"/docs/docs/compute/quickstart/client-libraries/nodejs",editUrl:"https://github.com/suborbital/docs/docs/compute/quickstart/client-libraries/nodejs.md",tags:[],version:"current",lastUpdatedAt:1640267248,formattedLastUpdatedAt:"12/23/2021",frontMatter:{},sidebar:"docs",previous:{title:"Connect your application",permalink:"/docs/docs/compute/quickstart/connect-your-application"},next:{title:"Using Compute from Go",permalink:"/docs/docs/compute/quickstart/client-libraries/golang"}},c=[{value:"Installation",id:"installation",children:[],level:2},{value:"Setup",id:"setup",children:[{value:"Default Config",id:"default-config",children:[],level:3},{value:"Local config",id:"local-config",children:[],level:3},{value:"Custom API URLs or ports:",id:"custom-api-urls-or-ports",children:[],level:3}],level:2},{value:"Getting started",id:"getting-started",children:[{value:"Example output",id:"example-output",children:[],level:3}],level:2},{value:"Full API",id:"full-api",children:[{value:"Admin:",id:"admin",children:[{value:"<code>suborbital.admin.getToken</code>",id:"suborbitaladmingettoken",children:[],level:4},{value:"<code>suborbital.admin.getFunctions</code>",id:"suborbitaladmingetfunctions",children:[],level:4},{value:"<code>suborbital.admin.getFunctionResults</code>",id:"suborbitaladmingetfunctionresults",children:[],level:4},{value:"<code>suborbital.admin.getFunctionErrors</code>",id:"suborbitaladmingetfunctionerrors",children:[],level:4}],level:3},{value:"Exec:",id:"exec",children:[{value:"<code>suborbital.exec.run</code>",id:"suborbitalexecrun",children:[],level:4}],level:3},{value:"Builder:",id:"builder",children:[{value:"<code>suborbital.builder.build</code>",id:"suborbitalbuilderbuild",children:[],level:4},{value:"<code>suborbital.builder.getDraft</code>",id:"suborbitalbuildergetdraft",children:[],level:4},{value:"<code>suborbital.builder.deployDraft</code>",id:"suborbitalbuilderdeploydraft",children:[],level:4},{value:"<code>suborbital.builder.testDraft</code>",id:"suborbitalbuildertestdraft",children:[],level:4},{value:"<code>suborbital.builder.getTemplate</code>",id:"suborbitalbuildergettemplate",children:[],level:4}],level:3}],level:2}],p={toc:c};function d(e){var n=e.components,t=(0,a.Z)(e,o);return(0,r.kt)("wrapper",(0,i.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"using-compute-from-javascript-or-typescript"},"Using Compute from JavaScript or TypeScript"),(0,r.kt)("p",null,"Use this library to easily interact with Compute's APIs."),(0,r.kt)("h2",{id:"installation"},"Installation"),(0,r.kt)("p",null,"Install it via ",(0,r.kt)("inlineCode",{parentName:"p"},"yarn")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"npm"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"yarn add @suborbital/compute\n")),(0,r.kt)("p",null,"or:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"npm install @suborbital/compute\n")),(0,r.kt)("h2",{id:"setup"},"Setup"),(0,r.kt)("p",null,"Import the library and configure the client. The default configuration will point the client at Compute's default production URLs in your cluster. "),(0,r.kt)("p",null,"A configuration for local development is also provided."),(0,r.kt)("h3",{id:"default-config"},"Default Config"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},'import { Suborbital } from "@suborbital/compute";\n\nconst suborbital = new Suborbital(configuration);\n')),(0,r.kt)("h3",{id:"local-config"},"Local config"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},'import { Suborbital, localConfig } from "@suborbital/compute";\n\nconst suborbital = new Suborbital(localConfig);\n')),(0,r.kt)("h3",{id:"custom-api-urls-or-ports"},"Custom API URLs or ports:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},'import { Suborbital } from "@suborbital/compute";\n\nconst configuration = {\n  adminUri: "https://acme.co:8081",\n  execUri: "https://acme.co:8080",\n  builderUri: "https://acme.co/builder",\n};\n\nconst suborbital = new Suborbital(configuration);\n')),(0,r.kt)("h2",{id:"getting-started"},"Getting started"),(0,r.kt)("p",null,"Using the ",(0,r.kt)("a",{parentName:"p",href:"/docs/docs/compute/api-reference/api-reference"},"Compute APIs"),", this guide will use the Administrative and Execution APIs to get a list of available functions and execute one."),(0,r.kt)("p",null,"The Administrative API's ",(0,r.kt)("inlineCode",{parentName:"p"},"getFunctions")," method takes an object with a ",(0,r.kt)("inlineCode",{parentName:"p"},"userId")," and a ",(0,r.kt)("inlineCode",{parentName:"p"},"namespace")," and returns a list of available functions for that user in the provided namespace."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},'async function listAvailableFunctions() {\n  const functionList = await suborbital.admin.getFunctions({\n    userId: "1234",\n    namespace: "default",\n  });\n\n  console.log("Functions:", functions);\n}\n')),(0,r.kt)("h3",{id:"example-output"},"Example output"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "functions": [\n        {\n            "name": "foo",\n            "namespace": "...",\n            "lang": "...",\n            "version": "...",\n            "draftVersion": "...",\n            "apiVersion": "...",\n            "fqfn": "...",\n            "fqfnURI": "...",\n        }\n    ]\n}\n')),(0,r.kt)("p",null,"The result includes a function named ",(0,r.kt)("inlineCode",{parentName:"p"},"foo")," (which for this tutorial already exists) and which we will execute using the Execution API's ",(0,r.kt)("inlineCode",{parentName:"p"},"run")," method. "),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"run")," method takes an object with the ",(0,r.kt)("inlineCode",{parentName:"p"},"environment"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"userId"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"namespace"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"fnName"),", and ",(0,r.kt)("inlineCode",{parentName:"p"},"version"),", and returns the result of the executed function."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},'async function runFunction() {\n  const result = await suborbital.exec.run({\n    environment: "com.acmeco",\n    userId: "1234",\n    namespace: "default",\n    fnName: "foo",\n    version: "v1.0.0",\n  });\n\n  console.log("Function output:", result);\n}\n')),(0,r.kt)("h2",{id:"full-api"},"Full API"),(0,r.kt)("p",null,"These are all of the available methods."),(0,r.kt)("h3",{id:"admin"},"Admin:"),(0,r.kt)("h4",{id:"suborbitaladmingettoken"},(0,r.kt)("inlineCode",{parentName:"h4"},"suborbital.admin.getToken")),(0,r.kt)("p",null,"Description: Description: Retrieves an authentication token for the given function, typically used to authenticate calls to the Builder API.\nArgs: An object containing ",(0,r.kt)("inlineCode",{parentName:"p"},"environment"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"userId"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"namespace"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"fnName"),"\nResult: A string containing the token used for authorization."),(0,r.kt)("h4",{id:"suborbitaladmingetfunctions"},(0,r.kt)("inlineCode",{parentName:"h4"},"suborbital.admin.getFunctions")),(0,r.kt)("p",null,"Description: Returns a list of available functions for the given user in the given namespace.\nArgs: An object containing ",(0,r.kt)("inlineCode",{parentName:"p"},"userId"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"namespace"),"\nResult:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "functions": [\n        {\n            "name": "foo",\n            "namespace": "...",\n            "lang": "...",\n            "version": "...",\n            "draftVersion": "...",\n            "apiVersion": "...",\n            "fqfn": "...",\n            "fqfnURI": "...",\n        }\n    ]\n}\n')),(0,r.kt)("h4",{id:"suborbitaladmingetfunctionresults"},(0,r.kt)("inlineCode",{parentName:"h4"},"suborbital.admin.getFunctionResults")),(0,r.kt)("p",null,"Description: Returns the most recent results (up to 5) produced by the execution of the given function.\nArgs: An object containing ",(0,r.kt)("inlineCode",{parentName:"p"},"environment"),",",(0,r.kt)("inlineCode",{parentName:"p"},"userId"),",",(0,r.kt)("inlineCode",{parentName:"p"},"namespace"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"fnName"),",",(0,r.kt)("inlineCode",{parentName:"p"},"version"),"\nResult:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "results": [\n        {\n            "uuid": "...",\n            "timestamp": "...",\n            "response": "..."\n        }\n    ]\n}\n')),(0,r.kt)("h4",{id:"suborbitaladmingetfunctionerrors"},(0,r.kt)("inlineCode",{parentName:"h4"},"suborbital.admin.getFunctionErrors")),(0,r.kt)("p",null,"Description: Returns the most recent errors (up to 5) produced by the execution of the given function.\nArgs: An object containing ",(0,r.kt)("inlineCode",{parentName:"p"},"environment"),",",(0,r.kt)("inlineCode",{parentName:"p"},"userId"),",",(0,r.kt)("inlineCode",{parentName:"p"},"namespace"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"fnName"),",",(0,r.kt)("inlineCode",{parentName:"p"},"version"),"\nResult:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "errors": [\n        {\n            "uuid": "...",\n            "timestamp": "...",\n            "code": 400,\n            "message": "..."\n        }\n    ]\n}\n')),(0,r.kt)("h3",{id:"exec"},"Exec:"),(0,r.kt)("h4",{id:"suborbitalexecrun"},(0,r.kt)("inlineCode",{parentName:"h4"},"suborbital.exec.run")),(0,r.kt)("p",null,"Description: Executes the given function, with the provided body, params and state loaded into the function at runtime.\nArgs: An object containing ",(0,r.kt)("inlineCode",{parentName:"p"},"environment"),",",(0,r.kt)("inlineCode",{parentName:"p"},"userId"),",",(0,r.kt)("inlineCode",{parentName:"p"},"namespace"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"fnName"),",",(0,r.kt)("inlineCode",{parentName:"p"},"version"),"\nResult: The result of the executed function."),(0,r.kt)("h3",{id:"builder"},"Builder:"),(0,r.kt)("h4",{id:"suborbitalbuilderbuild"},(0,r.kt)("inlineCode",{parentName:"h4"},"suborbital.builder.build")),(0,r.kt)("p",null,"Description: Builds the provided code using the specified language toolchain.\nArgs: An object containing ",(0,r.kt)("inlineCode",{parentName:"p"},"language"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"environment"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"userId"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"namespace"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"fnName"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"token"),"\nResult: A string containing the logs for the build."),(0,r.kt)("h4",{id:"suborbitalbuildergetdraft"},(0,r.kt)("inlineCode",{parentName:"h4"},"suborbital.builder.getDraft")),(0,r.kt)("p",null,"Description: Gets the draft for the specified runnable.\nArgs: An object containing ",(0,r.kt)("inlineCode",{parentName:"p"},"environment"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"userId"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"namespace"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"fnName"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"token"),"\nResult: A specified runnable."),(0,r.kt)("h4",{id:"suborbitalbuilderdeploydraft"},(0,r.kt)("inlineCode",{parentName:"h4"},"suborbital.builder.deployDraft")),(0,r.kt)("p",null,"Description: Deploys the specified runnable.\nArgs: An object containing ",(0,r.kt)("inlineCode",{parentName:"p"},"environment"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"userId"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"namespace"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"fnName"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"token"),"\nResult: A string containing the version."),(0,r.kt)("h4",{id:"suborbitalbuildertestdraft"},(0,r.kt)("inlineCode",{parentName:"h4"},"suborbital.builder.testDraft")),(0,r.kt)("p",null,"Description: Tests the draft for the specified runnable.\nArgs: An object containing ",(0,r.kt)("inlineCode",{parentName:"p"},"environment"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"userId"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"namespace"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"fnName"),"\nResult: A string containing the result."),(0,r.kt)("h4",{id:"suborbitalbuildergettemplate"},(0,r.kt)("inlineCode",{parentName:"h4"},"suborbital.builder.getTemplate")),(0,r.kt)("p",null,"Description: Gets the template (which controls what your users see when they create a new function) for a new function of the given language.\nArgs: An object containing ",(0,r.kt)("inlineCode",{parentName:"p"},"fnName"),",",(0,r.kt)("inlineCode",{parentName:"p"},"language"),"\nResult:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},'  //Example template for rust language \n  import { logInfo } from "@suborbital/suborbital"\n\n  export function run(input: ArrayBuffer): ArrayBuffer {\n    let inStr = String.UTF8.decode(input)\n\n    let out = "Hello there, " + inStr\n\n    return String.UTF8.encode(out)\n  }\n')))}d.isMDXComponent=!0}}]);